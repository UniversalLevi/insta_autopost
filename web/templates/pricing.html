<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plans | InstaForge</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="pricing-page">
        <div class="pricing-header">
            <h1>InstaForge â€“ All Features Free</h1>
            <p>Everything is available to everyone. No payments, no limits.</p>
        </div>

        <div class="pricing-grid" id="pricing-grid">
            <div class="text-muted">Loading plans...</div>
        </div>

        <div class="auth-link" style="margin-top: 1.5rem;">
            <a href="/">Back to Dashboard</a>
            <span style="margin: 0 0.5rem;">|</span>
            <a href="/login">Sign in</a>
        </div>
    </div>

    <script>
        async function loadPlans() {
            const res = await fetch('/api/plans', { credentials: 'include' });
            const data = await res.json();
            const plans = data.plans || {};
            const grid = document.getElementById('pricing-grid');
            grid.innerHTML = '';
            const planOrder = ['free', 'starter', 'pro'];
            const planLabels = { free: 'Free', starter: 'Starter', pro: 'Pro' };
            planOrder.forEach((key) => {
                const p = plans[key];
                if (!p) return;
                const card = document.createElement('div');
                card.className = 'pricing-card' + (key === 'starter' ? ' featured' : '');
                const accounts = p.accounts === -1 || p.accounts >= 999 ? 'Unlimited' : p.accounts;
                const scheduled = p.scheduled_posts_per_month === -1 ? 'Unlimited' : p.scheduled_posts_per_month;
                const batch = p.batch_upload ? (p.batch_upload_max_files >= 999 ? 'Unlimited' : p.batch_upload_max_files + ' files') : 'No';
                card.innerHTML = `
                    <h2>${planLabels[key] || p.name}</h2>
                    <div class="price">${p.price_display || 'Free'}</div>
                    <ul>
                        <li>${accounts} account(s)</li>
                        <li>${scheduled} scheduled posts/month</li>
                        <li>AI DM: ${p.ai_dm ? 'Yes' : 'No'}</li>
                        <li>Batch upload: ${batch}</li>
                        <li>Warm-up: ${p.warmup_automation ? 'Yes' : 'No'}</li>
                        <li>Comment-to-DM: ${p.comment_to_dm ? 'Yes' : 'No'}</li>
                    </ul>
                    <span class="badge badge-success">Included</span>
                `;
                grid.appendChild(card);
            });
        }
        document.addEventListener('DOMContentLoaded', loadPlans);
    </script>
</body>
</html>
